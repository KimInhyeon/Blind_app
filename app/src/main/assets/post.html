<!DOCTYPE html>
<html lang="ja">
<head>
    <style>
        .cdx-input.cdx-simple-image__caption {
			display: none;
		}
    </style>
</head>
<body>
<div id="contents"></div>
<input type="file" accept="image/*" multiple hidden>
<script src="editor.js"></script>
<script src="underline.js"></script>
<script src="marker.js"></script>
<script src="simple-image.js"></script>
<script>
    let editor;

    function writeInit() {
        editor = new EditorJS({
            holder: "contents",
            tools: {
                underline: Underline,
                marker: Marker,
                image: SimpleImage
            }
        });
    }

    function editInit(blocks) {
        editor = new EditorJS({
            holder: "contents",
            tools: {
                underline: Underline,
                marker: Marker,
                image: SimpleImage
            },
            data: {
			    blocks: blocks
            }
        });
    }

    function save() {
        editor.save().then(function (savedData) {
            const blockList = savedData.blocks;
            for (let i = blockList.length - 1; i > -1; --i) {
                delete blockList[i].id;
            }

            Android.save(JSON.stringify(blockList));
        });
    }
</script>
</body>
</html>